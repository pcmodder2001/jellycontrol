{% extends 'base.html' %}

{% block title %}Create Invitation{% endblock %}

{% block content %}
<div class="uk-container uk-margin-large-top">
    <!-- Page Header -->
    <h1 class="uk-heading-line uk-text-center">
        <span>Create Invitation</span>
    </h1>

    <!-- Form for Creating Invitation -->
    <form method="post" class="uk-form-stacked uk-width-1-2@s uk-margin-auto">
        {% csrf_token %}

        <!-- Invite Code Field -->
        <div class="uk-margin">
            <label class="uk-form-label" for="invite_code">Invite Code:</label>
            <div class="uk-form-controls">
                <input class="uk-input" id="invite_code" name="invite_code" type="text" required readonly>
                <p class="uk-text-meta uk-margin-small-top">Generated automatically.</p>
            </div>
        </div>

        <!-- Max Users Field -->
        <div class="uk-margin">
            <label class="uk-form-label" for="max_users">Max Users:</label>
            <div class="uk-form-controls">
                <input class="uk-input" id="max_users" name="max_users" type="number" min="1" required>
            </div>
        </div>

        <!-- Expiry Date Field -->
        <div class="uk-margin">
            <label class="uk-form-label" for="expiry">Expiry (optional):</label>
            <div class="uk-form-controls">
                <input class="uk-input" id="expiry" name="expiry" type="datetime-local">
            </div>
        </div>

        <!-- Submit Button -->
        <div class="uk-margin">
            <button class="uk-button uk-button-primary uk-width-1-1" type="submit">Create Invitation</button>
        </div>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Generate random invite code and populate the input field
    const inviteCodeInput = document.getElementById('invite_code');
    inviteCodeInput.value = generateRandomCode();

    // Function to generate a random 25-character alphanumeric code
    function generateRandomCode() {
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        let code = '';
        for (let i = 0; i < 25; i++) {
            code += characters.charAt(Math.floor(Math.random() * characters.length));
        }
        return code;
    }
});
</script>

{% endblock %}
